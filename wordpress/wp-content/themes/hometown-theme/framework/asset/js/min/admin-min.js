function register_base_admin($){function t(t){var i=0;return t.find("input:hidden.stack_id").each(function(){var t=parseInt($(this).attr("value"));t>=i&&(i=t+1)}),i}var i=null;i=arguments.length>1?arguments[1]:$(document),$("body").on("click",".icon-item",function(t){t.preventDefault(),$(this).siblings(".icon-item.active").removeClass("active"),$(this).addClass("active"),$(this).parents(".nt_icon_block").find(".wpb_vc_param_value").val($(this).data("id")),$(this).parents(".nt_icon_block").find(".cur-icon").html($(this).html()),$(this).parents(".nt_icon_block").find(".icon-list-box").hide()}),$("body").on("click",".icons-select",function(t){t.preventDefault(),$(this).parents(".nt_icon_block").find(".icon-list-box").toggle()}),i.find(".nt-custom-icon-list i").click(function(){$(this).parents("li").remove()}),$(".numeric").numeric(),i.find(".nt-theme-icon-box .item").click(function(){$(this).addClass("active"),$(this).siblings(".item").removeClass("active"),$(this).parents(".nt-theme-icon-box").siblings("input").val($(this).data("val"))}),i.find(".location-picker").each(function(){$(this).locationpicker({location:{latitude:$(this).data("latitude"),longitude:$(this).data("longitude")},scrollwheel:!1,enableAutocomplete:!0,radius:0,inputBinding:{latitudeInput:$(this).siblings(".latitude"),longitudeInput:$(this).siblings(".longitude"),radiusInput:null,locationNameInput:$(this).siblings(".location")}})}),$("#theme-options-form input, #theme-options-form select").on("keyup keypress",function(t){var i=t.keyCode||t.which;return 13==i?(t.preventDefault(),!1):void 0}),i.find(".button").click(function(){return $(this).data("confirm")?window.confirm($(this).data("confirm"))?($(this).hasClass("first-click")&&($(this).siblings(".second-click").show(),$(this).hide()),!0):!1:void 0}),i.find(".input-file-wrap").each(function(){$(".input-file-bt",$(this)).click(function(t){t.preventDefault(),$(this).siblings(".input-file-real").trigger("click")}),$(".input-file-real",$(this)).change(function(){$(this).siblings(".input-file-bt").hide(),$(this).siblings(".input-file-name").html($(this).val())})}),i.find(".input-on-off").iphoneStyle(),i.find(".input-on-off[toggle]").change(function(t,i){$(this).is(":checked")?($(".input-list."+$(this).attr("toggle")).show(),$($(".input-on-off, .input-radio",".input-list."+$(this).attr("toggle")).get().reverse()).trigger("change")):$(".input-list."+$(this).attr("toggle")).hide()}),i.find(".input-radio[toggle]").change(function(t,i){$(this).is(":checked")&&($(".input-list."+$(this).attr("toggle")).hide(),$(".input-list."+$(this).attr("toggle")+"-"+$(this).attr("value")).show(),$($(".input-on-off, .input-radio",".input-list."+$(this).attr("toggle")+"-"+$(this).attr("value")).get().reverse()).trigger("change"))}),i.find(".input-select[toggle]").change(function(t,i){$(".input-list."+$(this).attr("toggle")).hide(),$(".input-list."+$(this).attr("toggle")+"-"+$(this).attr("value")).show()}),i.find($(".input-on-off, .input-radio, .input-select").get().reverse()).trigger("change"),i.find(".input-color").each(function(){$(this).iris({hide:!0,palettes:["#ad0000","#ff6600","#70b001","#00ad8d","#008abc","#600089","#bc0054","#333333"],change:function(t,i){$("#headlinethatchanges").css("color",i.color.toString()),$(this).siblings(".color-indicator").css("background-color",i.color.toString())}})}),$(document).on("mousedown",function(t){0==$(t.target).closest(".iris-picker").length&&0==$(t.target).siblings(".iris-picker").length&&$(".iris-picker").hide()}),$(".input-color").focus(function(){$(this).iris("show")}),i.find(".input-range").each(function(){var t={range:"0,10",step:1,snap:!0},i=$.extend({},t,$(this).data());i.range=i.range.split(","),$(this).simpleSlider(i),$(this).bind("slider:changed",function(t,i){$(this).siblings(".input-range-value").html(i.value.toFixed(2))})}),i.find(".radio-img-list label").click(function(){$(".radio-img-list label",$(this).parents(".input-field")).removeClass("active"),$(this).addClass("active")}),i.find('.checkbox-img-list input[type="checkbox"]').change(function(){$(this).is(":checked")?$(this).siblings("label").addClass("active"):$(this).siblings("label").removeClass("active")}),i.find("#theme-box-tabs ul li").click(function(t){t.preventDefault(),$(this).hasClass("active")||($("#theme-box-tabs ul li").removeClass("active"),$(this).addClass("active"),$("#theme-box-content .theme-box-content-pane").removeClass("active").hide(),$("#theme-box-content .theme-box-content-pane:eq("+$(this).index()+")").addClass("active").show())}),i.find("#theme-options-save").click(function(){$(".notification-box").css("top",$(window).scrollTop()+100).html('<i class="nt-icon-clock-1"></i> saving').stop(!0,!0).fadeIn();var t=$(this),i={action:"nt_ajax_save_option",options:$("#theme-options-form").serialize()};$.post(ajaxurl,i,function(t){"ok"==t.result?$(".notification-box").html('<i class="nt-icon-ok"></i> success').delay(1e3).fadeOut("slow"):$(".notification-box").html('<i class="nt-icon-attention-circled"></i> fail').delay(1e3).fadeOut("slow")},"json")}),"undefined"!=typeof nt_option_auto_save&&$("#theme-options-save").trigger("click"),i.find(".stack_add_button").click(function(){try{var i=$(this).closest(".stack_menu").parent(),e=$(this).closest(".stack_menu").children("select.stack_select_template").find("option:selected"),n=i.children(".stack_container"),s=i.children("input:hidden:first"),a=t(n),o=e.attr("opt"),c=e.attr("conf"),l=$(this).attr("subgroup");$(".dummy-stack",n).remove();var d={action:"nt_ajax_generate_stack_option",stack_id:a,config:c,option:o,subgroup:l};$.post(ajaxurl,d,function(t){n.append(t);var i=n.children(":last");register_base_admin($,i)})}catch(r){alert(r)}}),i.find(".stack_container").sortable({item:".stack",handle:".nt-icon-align-justify",axis:"y"}),i.find(".stack_remove_button").click(function(){$(this).closest(".stack").remove()}),i.find(".stack_duplicate_button").click(function(t){t.stopPropagation();var i=$(this).closest(".stack").clone(!0);$(this).closest(".stack").after(i)}),i.find(".stack_header").click(function(){$(this).siblings(".inside").toggle()}),i.find('[id*="stack_title"]').change(function(){var t="";""!=$(this).val()&&($(this).is("select")?t="- "+$("option:selected",$(this)).text():$(this).is('[type="radio"]')?$(this).is(":checked")&&(t="- "+$(this).val()):t="- "+$(this).val()),$(this).closest(".stack").find(".stack_header_name").first().html(t)}),i.find('[id*="stack_title"]').keyup(function(){$(this).trigger("change")}),i.find('[id*="stack_title"]').trigger("change"),i.find(".images_container").sortable(),i.find(".images_add_button").on("click",function(t){var i="yes"==$(this).attr("multi")?!0:!1,e=wp.media({multiple:i,library:{type:"image"},button:{text:"Choose"}}),n=$(this);e.on("select",function(){for(var t=JSON.parse(JSON.stringify(e.state().get("selection"))),s=n.closest("td.input-field").find(".image_container"),a=n.data("field-name"),o=0,c=t.length;c>o;o++)if(i)for(var l in t[o].sizes){s.append('<div class="uploaded-image" attachment_id="'+t[o].id+'" style="float: left;"><input type="hidden" name="'+a+'[]" value="'+t[o].id+'" /><img src="'+t[o].sizes[l].url+'"/><div class="image-action-box"><i class="nt-icon-cancel-circled"></i></div></div>');break}else for(var l in t[o].sizes){s.html('<div class="uploaded-image" attachment_id="'+t[o].id+'" style="float: left;"><input type="hidden" name="'+a+'" value="'+t[o].id+'" /><img src="'+t[o].sizes[l].url+'"/><div class="image-action-box"><i class="nt-icon-cancel-circled"></i></div></div>');break}}),e.on("open",function(){}),e.on("close",function(){}),e.open()}),$(i).on("click",".nt-icon-cancel-circled",function(t){t.preventDefault(),$(this).parents(".uploaded-image").fadeOut("fast",function(){$(this).remove()}),$(this).parents(".uploaded-file").fadeOut("fast",function(){$(this).remove()})}),i.find(".uploaded-images-container").sortable({items:".uploaded-image",cursor:"move",placeholder:"ui-sortable-placeholder"}).disableSelection(),i.find(".file_add_button").on("click",function(t){var i=!1,e=wp.media({multiple:i,library:{type:"video"},button:{text:"Choose"}}),n=$(this);e.on("select",function(){var t=JSON.parse(JSON.stringify(e.state().get("selection"))),i=n.closest("td.input-field").find(".uploaded-file-container"),s=n.data("field-name");console.log(t);for(var a=0,o=t.length;o>a;a++)i.html('<div class="uploaded-file" attachment_id="'+t[a].id+'"><input type="hidden" name="'+s+'" value="'+t[a].id+'" />'+t[a].url+'<div class="image-action-box"><i class="nt-icon-cancel-circled"></i></div></div>')}),e.on("open",function(){}),e.on("close",function(){}),e.open()})}jQuery(document).ready(register_base_admin);